\chapter{Визуализация SVO}
%\addcontentsline{toc}{chapter}{Визуализация SVO}

В данной главе изложены некоторые наблюдения, полученные в ходе работ над визуализацией воксельной сцены, представленной ввиде SVO.

\begin{figure}[h]
\center
\includegraphics[width=\textwidth]{trace.jpg}
\caption{Тестовая сцена}
\label{fig:trace}
\end{figure}

Большинство экспериметров с варьированием параметров трассировщика проведено на сцене, показанной на рис.~\ref{fig:trace}. Время работы текущей версии GPU трассировщика лучей при построении данного изображения в разрешении 1024x768 составляет около 34~мс. 

\section{Исследование производителности трассировщика лучей}

\begin{figure}[h]
\center
\includegraphics[width=\textwidth]{trace_iters.jpg}
\caption{Количество итераций алогритма трассировки}
\label{fig:trace_iters}
\end{figure}

На рис.~\ref{fig:trace_iters} оттенками серого показано количество итераций, требуемых для трассировки каждого луча. На каждой итерации осуществляется одно из следующих действий:

\begin{itemize}
  \item Спуск вниз по октарному дереву на один уровень.
  \item Переход к следующему пересекаемому лучем узлу дерева, с возможным подьемом на несколько уровней.
  \item Сохранение результата при пересечении луча с непустым вокселем.
\end{itemize}

Среднее количество итераций близко к 50, однако для некоторых пикселей, как видно на рисунке, оно дистигает нескольких сотен.

\begin{figure}[h]
\center
\includegraphics[width=\textwidth]{trace_res_time.pdf}
\caption{Зависимость времени трассировки от разрешения}
\label{fig:trace_res_time}
\end{figure}

\begin{figure}[h]
\center
\includegraphics[width=\textwidth]{trace_lod_time.pdf}
\caption{Зависимость времени трассировки глубины дерева}
\label{fig:trace_lod_time}
\end{figure}


\begin{figure}[h]
\center
\includegraphics[width=\textwidth]{trace_scheduler.pdf}
\caption{Диаграмма исполнения для когерентных и перемешанных потоков}
\label{fig:trace_scheduler}
\end{figure}


\begin{itemize}
  \item диаграмы запуска потоков (нормальная и с шафлом), балансировка выч. нагрузки (бакалаврская)
\end{itemize}


\section{Сокрытие артефактов вокселизации}

\begin{figure}[h]
  \begin{center}
    \subfigure[Без сокрытия]{\label{fig:blur-a}\includegraphics[width=.45\textwidth]{trace_blur1.jpg}}
    \subfigure[Со случайными смещениями начальных точек лучей]{\label{fig:blur-b}\includegraphics[width=.45\textwidth]{trace_blur2.jpg}} \\
    \subfigure[Усредненное по нескольким кадрам изображение]{\label{fig:blur-c}\includegraphics[width=.7\textwidth]{trace_blur3.jpg}}
  \end{center}
  \caption{Сокрытие артефактов вокселизации}
  \label{fig:edge}
\end{figure}
